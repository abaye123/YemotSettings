Eeliyahu ניהול  4 בנוב׳ 2020, 17:34
עדכון סטטוס או מחיקה של מספרים מרשימת התפוצה

הפקודה היא - UpdateTemplateEntries

הפרמטרים הנדרשים

פרמטר	תיאור	הערות
token	טוקן	פרמטר חובה
templateId	מזהה תבנית	פרמטר חובה
rowids	מזהה ייחודי של המספרים ברשימת התפוצה	יש להפריד בין המספרים עם מקף ?? - ??
action	איזה פעולה לעשות	ישנם 3 אפשרויות. block - חסימה. unblock - ביטול חסימה. delete - מחיקה
אין מאפיינים מיוחדים בתגובת השרת

 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:34
מחיקת כל המספרים מרשימת התפוצה

הפקודה היא - ClearTemplateEntries

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן
templateId	מזהה תבנית
אין מאפיינים מיוחדים בתגובת השרת

 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:34
העלאת קובץ טקסט והפיכתו לרשימת טלפונים לתבנית קמפיין
הפקודה היא - UploadPhoneList
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	חובה
templateId	מזהה תבנית	חובה
data	קובץ רשימת הטלפונים כמחרוזת	חובה
nameColumns	מספר העמודות של 'שם'. כל עמודות הטקסט האחרות עוברות ל'מידע נוסף '	ברירת מחדל 1
defaultPrefix	קידומת מספר ברירת מחדל למספרים בני 7 ספרות.הערכים המותרים הם: 02,03,04,08,09,077,072,073.	רשות
delimiter	תו המפריד בין עמודות (עבור עמודות המופרדים ב טאב כיתבו "TAB"	ברירת מחדל ","
updateType	מגדיר את סוג העדכון: UPDATE = עדכן רשומות קיימות והוסף חדשות, NEW = הסר את כל הרשומות הקיימות והוסף חדש, REMOVE = הסר רשומות	ברירת מחדל UPDATE
blocked	1 = יקבע את סטטוס הרשומות שהועלה ל'חסום '.	ברירת מחדל 0 כלומר לא מגדיר כחסום
אם ניתוח הקבצים נכשל בגלל פורמט לא מזוהה, יחזיר תגובה עם הודעה = "bad_format".

מאפייני תגובת השרת

מאפיין	סוג	הסבר
message	string	"ok" - פירושו שההעלאה עובדה כהלכה
templateId	int	מזהה התבנית שעודכן
totalParsed	int	המספר הכולל של מספרים שהתקבלו
rejectedRecords	Array	מערך המתאר את הרשומות שנדחו (ראה להלן פירוט)
totalInserted	int	המספר הכולל של מספרים שהוכנסו בהצלחה
totalUpdated	int	המספר הכולל של המספרים שעודכנו
totalRemoved	int	המספר הכולל של המספרים שהוסרו
אם מספרים מסוימים נדחו משום מה, rejectedRecords יכיל מערך של אובייקטים בפורמט הבא:

מאפיין	סוג	הסבר
phone	string	מספר הטלפון
name	string	עמודת שם
moreinfo	string	עמודת מידע נוסף
blocked	bool	סטטוס חסום
errorState	enum	DUPLICATE = המספר כפול, INVALID = המספר לא חוקי (אסור בקמפיינים)
originalRowNumber	int	מספר השורה בו זוהתה השגיאה
 3 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:35
הפעלת קמפיין
הפקודה היא- RunCampaign
הערה-פקודה זו יוצרת קמפיין המבוסס על אחד מתבניות הקמפיין של הלקוח ואם הכל כראוי הקמפיין מופעל וכחלק מתגובת השרת תקבלו campaignId שעם זה תוכלו לעקוב אחרי סטטוס הקמפיין וכן להוציא דוח על הקמפיין ועוד.
הפרמטרים הנדרשים

 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
מצב הקמפיין-GetCampaignStatus

 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
הורדת דו"ח קמפיין-DownloadCampaignReport

 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
קבלת קמפיינים פעילים-GetActiveCampaigns

 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
ביצוע פעולות בקמפיינים פעילים-CampaignAction

 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:35
יצירת קמפיין מתוזמן
הפקודה היא - ScheduleCampaign

הפרמטרים הנדרשים

פרמטר	אפשרויות	תיאור/הערות/פירוט
token		טוקן
templateId		מספר מזהה של הקמפיין
time		הגדרת זמן הפעלה באחד מהצורות הבאות (תאריך לועזי בלבד)
אופציה 1	yyyy-MM-dd-HH:mm:ss	שנה -חודש - יום-שעה:דקה:שניה
אופציה 2	yyyy-MM-dd-HH:mm	שנה -חודש - יום-שעה:דקה
אופציה 3	yyyy-MM-dd HH:mm:ss	שנה -חודש - יום שעה:דקה:שניה(בין היום לשעה רווח במקום -)
אופציה 4	yyyy-MM-dd	שנה -חודש-יום
אופציה 5	HH:mm:ss	שעה:דקה:שניה
אופציה 6	HH:mm	שעה:דקה
 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:35
קבלת קמפיינים מתוזמנים-

הפקודה היא - GetScheduledCampaigns

הפרמטרים הנדרשים:

פרמטר	תיאור/הערות
token	טוקן
type	סוג הקמפיינים להחזרה. האפשרויות הם PENDING קמפיינים המיועדים לביצוע. SUCCESSFUL קמפיינים שבוצעו בהצלחה. FAILED קמפיינים שנכשלו.
order	סדר המיון. האפשרויות הם: asc (ברירת מחדל) - סדר עולה. desc- סדר יורד
from	אופציונלי - maximum number of records to include
limit	אופציונלי - מקסימום של קמפיינים להחזרה
 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
מחיקת קמפיין מתוזמן-DeleteScheduledCampaign

 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:35
הצגת תוכן שלוחה (תיקייה)

הפקודה היא GetIVR2Dir

הפרמטרים הנדרשים

פרמטר	תיאור	הערות
token	טוקן	חובה
path	נתיב תיקייה	חובה. לדוגמה: / עבור שלוחה ראשית. 1 עבור שלוחה 1 ext/1 עבור שלוחה ext/1
filesFrom	הצג קבצים מ	רשות. 0 יציג מהקובץ הראשון 1 יציג מהקובץ השני וכן הלאה. ברירת מחדל מציג מהקובץ הראשון.
filesLimit	הצג קבצים עד	רשות. לדוגמה, 5 יציג את הקובץ החמישי (כולל). ברירת מחדל מציג עד הקובץ האחרון
orderBy	מיין קבצים לפי	ראה להלן "ערכים אפשריים לפרמטר orderBy"
orderDir	סדר קבצים	asc - סדר עולה. desc - סדר יורד.
ערכים אפשריים לפרמטר orderBy

ערך	תיאור
name	שם קובץ (ברירת מחדל)
date	תאריך יצירה
mtime	תאריך שינוי אחרון
customerdid	מספר מערכת
uploader	מעלה הקובץ
size	גודל
source	מקור
מאפייני תגובת השרת

מאפיין	סוג	הסבר
extIni		אובייקט הכולל את הגדרות השלוחה
thisPath	string	נתיב תיקייה נוכחית
parentPath	string	נתיב תיקיית אב
dirs	Array	מערך הכולל את התיקיות והשלוחות שבתיקייה הנוכחית
files	Array	מערך הכולל את הקבצים שבתיקייה הנוכחית (מלבד קבצי ini ו-html שנמצאים במערך נפרד)
ini	Array	מערך הכולל את קבצי ההגדרות (ini) שבשלוחה
messages	Array	מערך הכולל את הודעות המערכת הקשורת לשלוחה
html	Array	מערך הכולל את קבצי הדוחות (html) שבשלוחה
מאפיינים משותפים לאובייקטים במערכים "dirs" "files" "ini" "messages" "html"

מאפיין	סוג	הסבר
exists	boolean	האם התיקייה/קובץ קיימים
name	string	שם התיקייה/קובץ
uniqueId	string	מזהה ייחודי לתיקייה/קובץ
what	string	נתיב תיקייה/קובץ
fileType	string	סוג תיקייה/קובץ
מאפיינים משותפים לאובייקטים במערכים "files" "ini" "messages" "html"

מאפיין	סוג	הסבר
size	int	גודל קובץ (בבתים)
mtime	string	תאריך שינוי אחרון
מאפיינים משותפים לאובייקטים במערכים "files" "messages"
הערה: המאפיינים הבאים הינם עבור קבצי שמע בלבד

מאפיין	סוג	הסבר
duration		אורך (בדקות)
durationStr	string	אורך בפורמט mm:ss
customerDid	string	מספר מערכת בה נוצר הקובץ
meta	string	אובייקט המכיל מיגע נוסף על הקובץ
date	string	זמן יצירת קובץ dd/mm/yyyy hh:mm
source	string	מקור הקובץ
phone	string	טלפון יוצר הקובץ
ip	string	כתובת IP של מעלה הקובץ
מאפייני אובייקטים במערך dirs
הערה: המאפיינים הבאים הינם עבור תיקיות המוגדרות כשלוחה ולא עבור תיקיות רגילות

מאפיין	סוג	הסבר
extType	string	סוג שלוחה
extTitle	string	תיאור שלוחה
 2 
Eeliyahu ניהול 4 בנוב׳ 2020, 17:35
קבלת רשימת קבצים שבשלוחה-GetIvrTree

 2 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:35
ניהול תיקיות וקבצים

הפקודה היא FileAction

הפרמטרים הנדרשים

פרמטר	תיאור	הערה
token	טוקן	
action	סוג הפעולה לביצוע	ראה להלן
what	נתיב	ראה להלן
target	יעד	ראה להלן
בפרמטר action האפשרויות הקיימות הן:

copy - העתקה
move - העברה (לשינוי שם של שלוחה או קובץ יש להשתמש בהעברה)
delete - מחיקה
בפרמטר what האפשרויות הקיימות הן:

ניהול קובץ בודד או שלוחה בודדת.
ניהול קבצים מרובים כאשר בפרמטר what יש לציין כל קובץ או שלוחה בנפרד. לדוגמה:
${url}FileAction?token=${token}&action=${action}&what0=ivr2:1&what1=ivr2:2/ext.ini
בדוגמה: ניהול שלוחה 1 וניהול קובץ ext.ini שבשלוחה 2.

בפעולה מסוג העברה או העתקה חובה לציין פרמטר target. האפשרויות הקיימות הן:

בניהול קבצים מרובים או שלוחות מרובות יש לציין את נתיב היעד הרצוי. לדוגמה, במידה והיעד הוא שלוחה 1 יש לציין את הנתיב כך target=ivr2:1.
הערה: שימו לב! השם המקורי נשמר. במידה ומדובר בהעברת או העתקת קבצים עם שם בעל מספר סידורי שמות הקבצים ישתנו בהתאם לשמות הקבצים בשלוחת היעד. (לדוגמה, אם בוצעה העתקה של קובץ 001 משלוחה 2 לשלוחה 1 ששם קיים קובץ בשם 050 אז השם של הקובץ שהועתק ישתנה ל-051).
בניהול קובץ בודד או שלוחה בודדת ניתן גם לציין נתיב מלא כולל השם הרצוי ביעד.
מאפייני תגובת השרת:

מאפיין	סוג	הסבר	הערה
reports	array	מערך אובייקטים	ראה להלן
success	boolean	האם הפעולה בוצעה	במידה וכן, יופיע הערך true. במידה ולא, יופיע הערך false
action		סוג הפעולה שבוצעה	
תבנית אובייקט

מאפיין	ערך
what	נתיב מקור
target	נתיב יעד
success	האם בוצע (זהה לתיאור לעיל)
 4 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:36
קבלת תוכן קובץ טקסט-GetTextFile

 4 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:36
העלאת טקסט לקובץ

הערה: במידה והקובץ לא קיים בשלוחה, ייווצר קובץ חדש.

הפקודה היא - UploadTextFile

הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
what	שם הקובץ והסיומת	יש לציין את הנתיב המלא. לדוגמה ivr2:1/ext.ini
contents	תוכן הקובץ להעלאה	במידה וקיים כבר טקסט בקובץ הוא יימחק
אין מאפיינים מיוחדים בתגובת השרת

 5 
Eeliyahu ניהול  4 בנוב׳ 2020, 17:49
עדכון הגדרות שלוחה

שימו לב! בשונה מהפקודה UploadTextFile כאן המערכת לא מוחקת את הקיים בקובץ ext.ini והדבר היחיד שמשתנה הוא מה שאתם שולחים לשרת

הערה: במידה והשלוחה לא קיימת במערכת, תיווצר שלוחה חדשה.

הפקודה היא - UpdateExtension

הפרמטרים הנדרשים:

פרמטר	תיאור / הערות
token	טוקן
path	נתיב
בפרמטרים הנוספים תוכלו לצרף ערכים לעדכון בקובץ ext.ini

לדוגמה:

${url}UpdateExtension?token=${token}&path=ivr2:1&type=menu&title=בדיקה&enter_id=yes
בדוגמה, עדכון הגדרות לשלוחה 1, סוג השלוחה - תפריט, כינוי השלוחה - בדיקה, תתבצע כניסה לפי מספר אישי.

אין מאפיינים מיוחדים בתגובת השרת

 5 
אחרי 5 חודשים
שמואלשמואל  5 באפר׳ 2021, 22:56
הכוונת שיחה - העברת מאזין באפשרות הראשונה לשלוחה אחרת או לניתוק

הפקודה היא - CallAction

הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	set:GOasap=XXXX	יש להחליף את "XXX" בלאן להעביר את המאזין, נתיב העברה, או "hangup" לניתוק
מאפייני תגובת השרת:

מאפיין	סוג	הסבר
calls	array	פירוט השיחות שבוצעה בהן פעולה - זהה לתיאור המופיע בפקודה GetIncomingCalls
action		סוג הפעולה שבוצעה
callsCount	int	מספר כולל של שיחות שבוצעה בהן פעולה
לפניות בנוגע לפורום: shmuel@yemot.co.il

 12 
שמואלשמואל 6 באפר׳ 2021, 10:33
ניהול חדרי ועידה:
הפקודה היא - CallAction

בקריאה ל GetIncomingCalls יש מערך של שיחות של חדרי ועידה, כל הפעולות המפורטות כאן צריכות להיות מבוצעות על הid של המאזין של חדר הועידה - ולא על הID הראשי.

טיפה הסבר על מערך של שיחות הוועידה:

דוגמא:

4c97d3a2-6790-43f7-93f9-54b428a7bdd9-image.png

נעבור על החלקים החשובים.

פרמטר	תיאור	הערות
confCalls	מכיל את מספר המערכת הראשי, ואז - ואז את השלוחה של חדר הועידה	
mute	האם הערוץ מושתק	
hand	האם יש הרמת אצבע	
admin	האם מנהל	
data['survey']	מכיל את נתוני הצבעה, במהלך החדר המאזין יכול להקיש על כל הספרות בטלפון שלו וזה משוקף מייד.	באם אין הקשה הערך לא יופיע
הוספה או הסרה של רכיבים מה path וממערך data.
השימוש למשל, כדי לבטל את ההצבעות של המשתשים כדי לאפס את נתוני הסקר.

הוספה של ערך:
פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
path:add:XXX	הוספה של נתון בpath, זה גם יופיע במערך data שהובא לעיל	יש להחליף את XXX בערך, למשל: path:add:survey=7.
הסרה של ערך:
פה ניתן לשלוח רק את ההתחלה של הערך, והוא ירד.

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
path:remove:XXX	הסרה של נתון בpath, זה גם ירד במערך data שהובא לעיל	יש להחליף את XXX בתחילת ערך, למשל: path:remove:survey=. זה יגרום למחיקה של ערך survey ממערך הdata בכלל - למשל, כדי לאפס נתוני הצבעה.
יש לשים לב, זה לא משפיע על סוג וצורת החדר, למשל, שליחה של path:add:admin לא תגרום למאזין להיות מנהל של החדר.

הוצאה מחדר ועידה.
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	kick	
המאזין הולך ביציאה בדיוק לאן שהיה הולך אם המנהל היה מנתק את החדר או שהוא יהיה יוצר מהחדר אלא אם כן מוגדר בשלוחה, התבאר פה.
ניתן גם להוציא את המאזין לשלוחה ספציפית גם ללא שום הגדרה בשלוחה, ניתן לראות בפוסט זה תחת "כיוון הוצאה מחדר ועידה".

השתקת הערוץ:
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	mute	
ביטול השתקה של הערוץ:
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	unmute	
סימון הורדת יד:
בדומה להורדת אצבע על ידי המאזין בטלפון.
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	lowerhand	
סימון הרמת יד:
בדומה להרמת אצבע על ידי המאזין בטלפון.
הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
action	raisehand	
כיוון הוצאה מחדר ועידה:
יש לפנות לפה לפני שעושים kick על מנת לכוון את המאזין ללכת לשלוחה ספציפית בהוצאה מהחדר. באפשרות זו לא צריך שום הגדרה בשלוחה שתאפשר את היציאה מהחדר, ואם פונים לכאן לפני kick המאזין ילך לאן שהתבקש.

הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
set:ConfbridgeNewGoto=/XX	מסמן לאן להעביר את המאזין בביצוע kick מהאתר	יש לכתוב נתיב להעברה או hangup לניתוק.
מאפייני תגובת השרת בכל הפעולות:

מאפיין	סוג	הסבר
calls	array	פירוט השיחות שבוצעה בהן פעולה - זהה לתיאור המופיע בפקודה GetIncomingCalls
action		סוג הפעולה שבוצעה
callsCount	int	מספר כולל של שיחות שבוצעה בהן פעולה
לפניות בנוגע לפורום: shmuel@yemot.co.il

 13 
שמואלשמואל 7 באפר׳ 2021, 13:22
שינוי השפה בערוץ:
גובר על ערך language בשלוחה ובivr.ini.

הפרמטרים הנדרשים:

פרמטר	תיאור	הערות
token	טוקן	
ids	מזהה ייחודי של השיחה כפי שהתקבל בקריאה GetIncomingCalls	ניתן לשרשר כמה שיחות לביצוע על ידי כתיבה : בין id לid
set:Clanguage=XX	מסמן את השפה החדשה בערוץ כולו יש להחליף את XX בשפה המבוקשת - כל קודי השפה שיש כמו במערכת עצמה	השינוי יכנס לתוקף במעבר שלוחה הבא של המאזין.
מאפייני תגובת השרת:

מאפיין	סוג	הסבר
calls	array	פירוט השיחות שבוצעה בהן פעולה - זהה לתיאור המופיע בפקודה GetIncomingCalls
action		סוג הפעולה שבוצעה
callsCount	int	מספר כולל של שיחות שבוצעה בהן פעולה
לפניות בנוגע לפורום: shmuel@yemot.co.il

 6 

