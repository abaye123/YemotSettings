אחרי 13 ימים
שמואלשמואל  21 באפר׳ 2021, 1:18
קבלת סיכום דקות נכנסות למערכת לפי טווח תאריכים

הפקודה היא - GetIncomingSum

הפרמטרים הנדרשים

פרמטר	תיאור	דוגמא
token	טוקן	
from	מאיזה תאריך	YYYY-mm-dd
to	עד איזה תאריך	YYYY-mm-dd
בחירת מחדל - אם לא צויין טווח תאריכים - יביא מתחילת החודש הלועזי		
מאפייני תגובת השרת

מאפיין	סוג	הסבר
fromDate	string	מאיזה תאריך מוצגים הנתונים
toDate	string	עד איזה תאריך מוצגים הנתונים
direct	int	דקות בחיוג ישיר למערכת
transferIn	int	דקות ממערכות אחרות
transferOut	int	דקות שיצאו למערכות אחרות
לפניות בנוגע לפורום: shmuel@yemot.co.il

 14 
אחרי 3 חודשים
שמואלשמואל  29 ביולי 2021, 16:24
קבלת לוג סמסים יוצאים
הפקודה היא - GetSmsOutLog

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	
limit	הגבלת תוצאות	int
בחירת מחדל מביא את כל הסמסים.
סדר קבלת הסמסים הם מהחדש לישן

מאפייני תגובת השרת

מאפיין	סוג	הסבר
rows	array	מערך של הסמסים היוצאים
להלן תוכן מערך הסמסים:

מאפיין	סוג	הסבר
CallerId	string	זיהוי יוצא
To	string	יעד
Message	string	תוכן ההודעה
Billing	int	עלות ביחידות
RunBy	string	פרטי מבצע הפעולה
Time	string	זמן השליחה
DeliveryReport	string	דוח מסירה
להלן סוגי סטטוס דוחות מסירה נפוצים לפי תקן SMPP:
#	הסבר
null	לא התקבל מידע על מסירת ההודעה
DELIVRD	נמסר
ESME_ROK	הועבר לשליחה בהצלחה
EXPIRED	פג תוקף מעקב המסירה
ESME_RINVDSTADR	יעד לא נגיש
ESME_RINVMSGLEN	אורך לא חוקי
ESME_RINVCMDLEN	אורך פקודה שגוי
ESME_RMSGQFUL	תור ההודעות מלא
ESME_RINVNUMDESTS	מספר יעדים לא חוקי
לפניות בנוגע לפורום: shmuel@yemot.co.il

 5 
שמואלשמואל  30 ביולי 2021, 15:41
ממשק אירועי אבטחה.
תיעוד API לגישה לאירועי האבטחה של המערכת של המערכת.

ה Web Services היבוארו כאן:

ValidationToken // מידע על הטוקן
DoubleAuth // ביצוע אימות דו שלבי בטוקן
GetLoginLog // קבלת לוג ניסיונות התחברות
GetAllSessions // קבלת סשנים פעילים
KillSession // סגירת סשן ספציפי
KillAllSessions // סגירת כל הסשנים הפעילים
הערה חשובה:
שימוש בטוקן שהוא שם משתמש וסיסמה של המערכת (077777:1234) לא ממולץ לעבודה עם מתודות שדורשים אימות דו שלבי מכיוון שהאימות הדו שלבי זה ברמת טוקן והתחברות בצורה כזו יוצרת טוקן משתנה.
מתודה - ValidationToken
קבלת מידע על טוקן.

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן
בתגובת השרת במידה שהטוקן תקין יתקבל מערך בשם tokenData המכיל את המידע הבא:

מאפיין	סוג	הסבר	דוגמא
remoteIP	string	כתובת IP של יוצר הטוקן	172.18.0.1
sessionType	string	סוג החיבור	API
createTime	string	זמן יצירה	2021-07-30 14:38:30
lastRequest	string	שימוש אחרון	2021-07-30 14:42:31
doubleAuthStatus	boolean	האם החיבור עבר אימות דו-שלבי	false
validationCalls	int	כמות שיחות אימות שיצאו ולא אומתו (ערך כללי, לא קשור לחיבור הספציפי)	3
token	string	רמז של הטוקן	hwe***5J76TM
בעיקרון, מה שחשוב לנו לזכור מכאן זה doubleAuthStatus - שמסמן לנו אם הטוקן עבר אימות דו שלבי, ו validationCalls שצריך לשים לב אליו, כי הוא מוגבל - זה יוסבר יותר בהמשך.

מתודה - DoubleAuth
ביצוע אימות דו שלבי בטוקן.

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן
action	פעולה: שליחת שיחת אימות או אימות בפועל.
אימות כפול מתבצע ב2 שלבים, מבקשים שיחת אימות, ואז פונים שוב עם קוד האימות לסיים את האימות.

קבלת שיחה:

שולחים פרמטר SendCode בערך action.

תגובה תקינה של השרת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
message	string	הודעת הצלחה	Call successfully sent
LastNumberToSend	string	4 הספרות האחרונות של המספר שאליו נשלחה השיחה	7770
שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	EXCEPTION	message	Missing parameters	חסרים פרמטרים, או ש action ריק או שהוא מצפה לערך נוסף
2	EXCEPTION	message	createPhone is Not Valid. verification is disabled	מספר יוצר המערכת לא מעודכן או לא מספר תקין, לא ניתן לבצע אימות
3	ERROR	message	Token has already been verified	כבר בוצע אימות דו שלבי בטוקן זה.
4	ERROR	message	Too many validation Calls. Try for a few more hours	יותר מידי שליחת שיחות במערכת ללא אימות בטווח קצר.
הסבר חשוב בנוגע לשגיאה 4: על מנת למנוע ניצול לרעה שליחת שיחות אימות מוגבלות, כל שליחה של שיחת אימות נספרת, וכל אימות מוצלח מוריד ספירה.
זה אומר, שאם תבצעו אימות מוצלח ושיחה אחד בלבד זה לא יחשב בתור שיחה, אבל אם תשלחו 4 שיחות אימות ורק אז יתבצע אימות אז יספר 3 שיחות שיצאו ללא צורך.

ניתן לראות את המונה שיחות של המערכת בפניה ל ValidationToken.
המונה מתאפס כל כ6 שעות.

ביצוע אימות בפועל:

שולחים פרמטר VerifyCode בערך action ואת 4 הספרות של המספר שקיבלתם ממנו את השיחה בערך code.

תגובה תקינה של השרת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
message	string	הודעת הצלחה	VerifiedOK
אחרי ביצוע אימות לטוקן ניתן להשתמש איתו למתודות שיבוארו מייד לאחר הסבר השגיאות.

שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	ERROR	message	Please SendCode before	לא ניתן לבצע אימות לפני שליחת שיחה. יש לשלוח שיחה קודם.
2	ERROR	message	Authentication failed	הקוד לא תקין.
3	ERROR	message	Missing parameters	חסרים פרמטרים, או ש action ריק או שהוא מצפה לערך נוסף
4	ERROR	message	Token has already been verified	כבר בוצע אימות דו שלבי בטוקן זה.
מתודה - GetLoginLog
קבל לוג התחברויות

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן שעבר אימות דו שלבי
limit	ניתן להגביל את כמות התוצאות שיתקבלו
username	חיפוש לוג לפי שם משתמש
לגבי ערך username: בעצם LoginLog לא מחייב שמדובר במערכת אמיתית ולכן זה נשמר לפי שם משתמש, בעת פניה ללא הערך יחזרו הלוגים של המספר הראשי של המערכת, אם ברצונכם להביא לוגים של מספר משנה למשל, יש לצרף ערך זה עם המספר משנה.

בתגובת השרת במידה שהטוקן תקין יתקבל array בשם data המכיל את כל התוצאות, כל תוצאה היא גם מערך המכיל את השדות הבאים:

מאפיין	סוג	הסבר	דוגמא
remoteIP	string	כתובת IP	172.18.0.1
sessionType	string	סוג החיבור	REGULAR
actionTimestamp	string	זמן	2021-07-30 14:13:00
username	string	שם המשתמש	0773137770
successful	boolean	האם מדובר בחיבור מוצלח או לא	false
שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	EXCEPTION	message	Unverified session	טוקן לא עבר אימות דו שלבי.
2	EXCEPTION	message	Unknown username	ערך שם משתמש שגוי.
מתודה - GetAllSessions
קבל סשנים פעילים

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן שעבר אימות דו שלבי
limit	ניתן להגביל את כמות התוצאות שיתקבלו
בתגובת השרת במידה שהטוקן תקין יתקבל array בשם sessions המכיל את כל החיבורים וערך int בשם sessionsCount המכיל את כמות הסשנים הפעילים.
כל ערך בתוך sessions יכיל:

מאפיין	סוג	הסבר	דוגמא
id	int	מזהה טוקן, לצורך הריגה שלו	16598
token	string	רמז של הטוקן	hwe***5J76TM
active	boolean	האם הטוקן פעיל	true
selectedDID	string	שם משתמש (בחיבור של API זה null	0773137770
remoteIP	string	כתובת IP של יוצר הטוקן	172.18.0.1
sessionType	string	סוג החיבור	API
createTime	string	זמן יצירה	2021-07-30 14:38:30
lastRequest	string	שימוש אחרון	2021-07-30 14:42:31
doubleAuthStatus	boolean	האם החיבור עבר אימות דו-שלבי	false
שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	EXCEPTION	message	Unverified session	טוקן לא עבר אימות דו שלבי.
מתודה - KillSession
סגירת סשן

הפרמטרים הנדרשים

פרמטר	תיאור
token	טוקן שעבר אימות דו שלבי
SessionId	מזהה סשן להריגה
תגובה תקינה של השרת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
SessionId	string	מזהה הסשן שנסגר	35
שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	EXCEPTION	message	Unverified session	טוקן לא עבר אימות דו שלבי.
2	EXCEPTION	message	SessionId Can only be a number	ערך מזהה סשן ריק או לא תקין.
3	ERROR	message	SSessionId is broken	מזהה סשן לא פעיל או לא נמצא.
מתודה - KillAllSessions
סגירת כל הסשנים הפעילים של המערכת

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן שעבר אימות דו שלבי	
תגובה תקינה של השרת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
KillSessions	string	כמות הסשנים שנסגרו	10
שגיאות אפשרויות:
סוג השגיאה מופיע ב responseStatus

#	סוג שגיאה	ערך הסברה	תוכן	הסבר
1	EXCEPTION	message	Unverified session	טוקן לא עבר אימות דו שלבי.
לפניות בנוגע לפורום: shmuel@yemot.co.il

 8 
אחרי 9 ימים
שמואלשמואל  9 באוג׳ 2021, 0:09
הפעלת צינתוק
הפקודה היא - RunTzintuk

שליחת צינתוק במתודה זו היא בעלות של 0.1 יחידה למספר מלבד הפעלה של צינתוק מרשימת צינתוקים חינמים שהיא ללא עלות.
יתכן שתעריף השימוש במודול זה ישתנה בהמשך לפי שיקול דעת ההנהלה.

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	
callerId	זיהוי יוצא, בחירת מחדל זיהוי ראשי של המערכת, ניתן לכתוב זיהוי ספיישל או מספר משנה. ניתן להשתמש עם זיהוי רנדומלי על ידי ציון RAND, זיהוי רנדומלי יבואר מתחת לטבלא	int
TzintukTimeOut	זמן צינתוק. בחירת מחדל 10 שניות. מקסימום זמן צינתוק 10 שניות	Float
phones	מספרים לחיוג. להלן 3 אפשריות: או מספרים מפורשים עם הפרדה של : בין מספר למספר. או מספרים מתוך רשימת תפוצה קיימת על ידי ציון tpl:XX כשאשר במקום הXX יש לכתוב את מזהה רשימת התפוצה. ניתן גם להוציא צינתוק לרשימת צינתוק חינמי (שימו לב הערה למטה בנוגע לאפשרויות שליחה לכמה רשימות צינתוקים חינמיים) על ידי ציון tzl:XX כאשר במקום XX יש לכתוב את מספר הרשימה במערכת.	
הסבר על זיהוי רנדומלי:
השירות מיועד למשל כדי לבצע אימות מספר טלפון באתרים וכד, בעת ציון של ערך זה לא ניתן לשלוח לרשימה של מספרים והמספר הראשון ברשימה כפי שנבחרה יקבל את השיחה.
בתגובה מהשרת יתמלא גם ערך verifyCode שמכיל את 4 הספרות האחרונות של הזיהוי ממנו יצא השיחה, ובערך callerId בתגובה מהשרת יהיה כתוב RAND. תוכלו לבצע אימות של הלקוח בצורה שאתם מבקשים ממנו להקיש את ה4 ספרות האחרונות של המספר ממנו הוא קיבל את השיחה ואתם משווים את זה עם verifyCode.
במקרה שהשיחה לא מזיהוי רנדומלי ערך verifyCode יהיה ריק.

שליחת צינתוקים לכמה רשימות צינתוקים חינמיים יחד:

השירות מוגבל ל50 רשימות בקריאה.
בעת שליחת צינתוק לרשימת צינתוקים חינמיים ניתן להפעיל קמפיין אחד לכמה רשימות יחד.
מספרים הנמצאים בכמה מהרשימות יקבלו צינתוק אחד בלבד.
על מנת לציין כמה רשימות ניתן או לחלק את הרשימות על ידי , אחרי ציון tpl:. למשל, כדי לשלוח לרשימה 100 ולרשימה 200 ו 300 יש לציין: tpl:100,200,300.
במידה ששמות הרשימות מכילות את התו , זה ייצור בעיות, ולכן אפשר גם לציין את זה כמערך, זאת במידה שהשליחה היא בPOST - json באופן שבphones מציינים רק tpl: ואת הרשימות בפרמטר tzintukLists. כמו בדוגמא הבאה:

{
    "phones": "tzl:",
    "tzintukLists": [
        "100",
        "200",
        "בית ספר, כיתה ג",
        "משרד, מזכירות"
    ]
}
מאפייני תגובת השרת בתגובה מוצלחת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	sting	סטטוס הפעולה	OK
verifyCode	sting	4 ספרות אחרונות של הזיהוי היוצא לצורכי אימות. יהיה מלא רק במידה שהשיחה מזיהוי רנדומלי.	9835
callerId	sting	זיהוי השיחה היוצא	0773137770
callsCount	int	כמות שיחות יוצאות	3
bilingPerCall	int	תשלום לכל שיחה	0.1
biling	int	כמות תשלום כולל	0.3
errors	array	מערך של מספרי טלפון שלא נשלח אילהם השיחה כולל הסיבה.	מתחת לטבלא
דוגמא לפירוט שגיאות במערך "errors":

{
05832XXXXX: "blocked", // חסום
0773137770: "double", // מספר כפול
*8080: "notValid" // מספר לא תקין
}
לפניות בנוגע לפורום: shmuel@yemot.co.il

 16 
שמואלשמואל  10 באוג׳ 2021, 16:34
ניהול רשימות צינתוקים במודול צינתוקים חינמיים
הפקודה היא - TzintukimListManagement

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
action	פעולה לביצוע, ערך חובה. יוסברו הפעולות מטה	string
TzintukimList	מספר הרשימה. לא חובה כאשר מבקשים לקבל את רשימת הצינתוקים	string
פעולה: getlists

מחזיר את כל רשימות הצינתוקים בתוך מערך "lists"

מאפייני תגובת השרת בתגובה מוצלחת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
lists	array	מערך של הרשימות, ראה טבלא למטה	
כל אובייקט במערך lists מכיל 2 ערכים:

מאפיין	סוג	הסבר	דוגמא
listName	string	שם הרשימה	120
subscribers	int	כמות רשומים	7
פעולה: getlistEnteres.
חובה לצרף ערך TzintukimList

מחזיר את רשימת המספרים המנויים לרשימה

מאפייני תגובת השרת בתגובה מוצלחת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
listName	string	שם הרשימה	1844
countSubscribers	int	כמות הרשומים	7
enteres	array	מערך של המספרים ושמות שלהם.	
 השמות נטענים מקובץ 'PhonesName.ini' מהשלוחה הראשית, תבנית הקובץ צריכה להכיל "טלפון=שם"

כל אובייקט במערך enteres מכיל:

מאפיין	סוג	הסבר	דוגמא
phone	string	מספר הטלפון הרשום	
name	string	השם של מספר הטלפון הרשום כפי שנטען מקובץ PhonesName.ini	
פעולה: getLogList
חובה לצרף ערך TzintukimList

מחזיר את לוג הפעולות שבוצעו על הרשימה

מאפייני תגובת השרת בתגובה מוצלחת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
events	array	מערך של האירועים, ראה טבלה	
כל אובייקט במערך events מכיל:

מאפיין	סוג	הסבר	דוגמא
Folder	string	שלוחה במערכת	1/2
CustomerDID	string	מספר המערכת	0773137770
Phone	string	מבצע הפעולה	0533137770
Date	string	תאריך	19/01/2021
Time	string	שעת ביצוע	00:39:10
TypeOperation	string	סוג הפעולה	מצורף למטה הסוגים
PhoneAction	string	פעולה על טלפון	(הערך יהיה מלא במידה שמדובר בפעולה על טלפון מסויים ברשימה)
הסוגים האפשריים בTypeOperation:

AddToListTzintuk // הוספה לרשימה
RunTzintuk // הפעלת צינתוק
RemovingToListTzintuk // הסרה מהרשימה
AdminRemovingToListTzintuk // מנהל הסיר מספר מהרשימה
ResetToListTzintuk // הרשימה אופסה
פעולה: resetList
חובה לצרף ערך TzintukimList

מאפס רשימת צינתוקים

מאפייני תגובת השרת בתגובה מוצלחת:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
list	string	הרשימה שאופסה	
באם תיהיה שגיאה יחזיר שגיאה

לפניות בנוגע לפורום: shmuel@yemot.co.il

 5 
אחרי 18 ימים
שמואלשמואל  28 באוג׳ 2021, 22:01
שליחת פקס
הפקודה היא - SendFax

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
pdfFile	קובץ לשליחה. יבואר 2 אפשרויות	string
phone	לאן לשלוח	string
callerId	זיהוי שיחה יוצאת. בחירת מחדל הזיהוי של המערכת הראשי	string
deliveryUrl	כתובת לקבלת דוח מסירה	string
pdfFile
ניתן לציין נתיב של קובץ מתוך המערכת, למשל: ivr2://FaxTest.pdf וישלח את קובץ "FaxTest.pdf" שתחת השלוחה הראשית. אפשר גם לציין את זה: /FaxTest.pdf, רק חשוב ה/ בהתחלה.

בנוסף, ניתן להעלות קובץ ספציפי, לצורך כך יש לציין בערך UPLOAD
ואז יש להעלות את הקובץ בערך "fileToUpload, כמובן בעת שימוש באפשרות זו הפניה חייבת להיות בPOST מסוג multipart/form-data

deliveryUrl יש לציין URL מלא לקבלת דוח מסירה. למשל: http://127.0.0.6:18358/FaxDel, הפניות ישלחו בPOST בלבד ויכילו את הערכים הבאים:

לכל הפניות יצורף ערך CampaignId שתוכלו להשוות אותו עם ערך CampaignId שמתקבל בהצלחה.
לכל הפניות יצורף ערך Delivery המכיל את סטטוס המסירה.

במידה שDelivery הוא NoAnswer יצורף ערך DIALSTATUS המכיל את התשובה של החיוג ללקוח.
במידה שDelivery הוא End יצורף ערך status המכיל את התשובה מצד מנוע הפקס. תשובה של מסירה מוצלחת תיהיה SUCCESS בערך status.
במידה שDelivery הוא Answer זה אומר שהשיחה נענת, מציין שהעברת הפקס התחילה.
על כל שליחה של פקס יש חיוב של 0.1 יחידות על עצם השליחה ובנוסף חיוב יחסי לפי הזמן של השיחה הפעילה - בחישוב של יחידה לדקה. אם זמן השליחה לקח 3 דקות תחוייבו בנוסף 3 יחידות, בנוסף, לא ניתן להפעיל שיחת פקס אם אין ספייר במערכת של יותר מ5 יחידות מהחיוב על השיחה עצמה.

מענה בעת הצלחה:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
callerId	string	זיהוי השיחה היוצאת	0773137770
CampaignId	string	מזהה הקמפיין	WSOC-LC-2021-08-28-21-40-49-083
deliveryUrl	string	מציין את הכתובת למסירה באם צויינה	http://127.0.0.6:18358/FaxDel
fileNameSend	string	שם הקובץ שנשלח	ivr2://FaxTest.pdf
callsCount	int	כמות שיחות יוצאות	1
bilingPerCall	float	חיוב לכל שיחה	0.1
biling	float	כמות חיוב בפועל	0.1
בעת שגיאה תפורט השגיאה והבעיה.

לפניות בנוגע לפורום: shmuel@yemot.co.il

 5 
אחרי חודש
שמואלשמואל  12 באוק׳ 2021, 15:51
בדיקה האם קובץ קיים
הפקודה היא - CheckIfFileExists

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
path	נתיב במערכת. דוגמאות למטה	string
אפשרויות ציון קבצים ניתן לציין בכל אחד מהצורות מטה:
לצורך הדוגמא כדי לחפש את קובץ ext.ini בשלוחה 4.

path=ivr2:/4/ext.ini
 
path=ivr2:4/ext.ini
 
path=ivr/4/ext.ini
מענה בעת הצלחה:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
fileExists	bool	האם הקובץ קיים	
path	string	המיקום שלו	ivr/1/ext.ini
לפניות בנוגע לפורום: shmuel@yemot.co.il

 10 
אחרי 29 ימים
שמואלשמואל  11 בנוב׳ 2021, 2:19
שליחת סמסים
הפקודה היא - SendSms

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
from	זיהוי שולח, בחירת מחדל זיהוי המערכת הראשי. ניתן לכתוב מספר מאושר במערכת או מספר משני. ניתן גם לבצע שליחה משולח טקסטואלי (זיהוי טקסט), באם יש לכם צורך בזה יש לפנות לשירות הלקוחות עם סיבה.	string
message	תוכן ההודעה	string
sendFlashMessage	הודעת פלאש? מסרון פלאש (הודעת הבזק) ישלח ללקוח ויקפוץ בטלפון במסך מלא. האפשרות יכולה לא לעבוד בטלפונים מסויימים/במפעילים מסויימים ויתכן שנמענים מסויימים יזהו את המסרון כמסרון רגיל.	Boolean (0/1)
phones	נמענים בהפרדה של : בין כל מספר, או tpl:X על מנת לשלוח לרשימת תפוצה במערכת שבמקום הX יש לכתוב את מזהה הקמפיין	string
החיוב על שליחת סמס הוא 0.1 יחידה לכל 70 תוים בחיוב לכל מספר טלפון.

מענה בעת הצלחה:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
message	string	תוכן ההודעה ששלחתם	
from	string	הזיהוי ממנו יצאה ההודעה	
sendCount	int	כמה הודעות נשלחו	
Billing	float	תשלום	
oks	array	מערך של מספרים אילהם נשלחה ההודעה	
errors	object	אובייקט המכיל את המספרים שאילהם לא נשלחה ההודעה כולל הסיבה	
במקרה של שגיאה השגיאה תפורט.

לפניות בנוגע לפורום: shmuel@yemot.co.il

 5 
אחרי 13 ימים
שמואלשמואל  23 בנוב׳ 2021, 15:11
הקמת שיחת גישור
הפקודה היא - CreateBridgeCall

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
callerId	זיהוי השיחה היוצאת שתופיע על הצג לאורך הדרך	string
Phones	מספר טלפון לחיוג	string
BridgePhones	מספר טלפון לניתוב	string
DialSip	האם להפעיל מנגנון חיוג ל SIP (הסבר למטה)	0/1
AccountNumber	מספר חשבון SIP במערכת (בחירת מחדל המספר הראשי)	int
RecordCall	האם להקליט את השיחה	Boolean (0/1)
SendMailInCall	האם לשלוח הקלטה למייל	Boolean (0/1)
SendMailInCallTo	מייל ספציפי לשליחת ההקלטה. בחירת מחדל המייל המופיע במערכת	string
ערכים שיש להם בחירת מחדל:

callerId=מספר מערכת ראשי
RecordCall=0
SendMailInCall=0
הסבר אודות הפעלת שירות חיוג לחשבון SIP (DialSip):
השירות מאפשר לחייג לחשבון SIP קיים במערכת וממנו לגשר את השיחה באופן שלא יהיה עלות ניתוב כפול אלא רק עלות של הניתוב החיצוני - אחרי המענה בשלוחת SIP.
בעת הפעלת השירות ערך Phones לא משנה (עדיין חובה לשלוח אותו) והמספר שיקבע הוא המספר של חשבון הSIP.
לא ניתן לחייג לשלוחת SIP שלא קיימת באותה המערכת.
בכל מקרה יש עלות של 0.1 יחידות על עצם הפעלת הקמפיין

החיוב על שליחת שיחה הוא 0.1 יחידה על עצם הקמת שיחת הגישור ואז לפי החישוב הבא:
יש כאן 2 מסלולי חיוב.
1: מהרגע שאני מוציא שיחה לנציג.
2: מהרגע שהלקוח המגושר ענה.

למשל, אם אני חייגתי לנציג 60 שניות, הוא חייג ללקוח - שהוא הלקוח המגושר. זמן החיוג היה 10 שניות ועוד 50 שניות הוא דיבר איתו, אז החיוב יחידות יהיה על 110 שניות:
60 שזה זמן השיחה הכללי, + 50 שניות של דיבור עם הלקוח המגושר. על זמן החיוג ללקוח המגושר הוא לא משלם.

מענה בעת הצלחה:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
CampaignId	string	מזהה קמפיין	WSOC-LC-2021-11-23-15-10-15-276
callerId	string	זיהוי השיחה	
callsCount	int	כמות שיחות	1
bilingPerCall	float	עלות של כל שיחה	
biling	string	סך הכל חיוב	
SendMailInCall	Boolean		
RecordCall	Boolean		
SendMailInCallTo	string		
כמובן, הערכים הקשורים לחיוב שמתקבלים בתגובה מציינים את החיוג על הפעלה הקמפיין ולא על החיוב הסופי שמחושב בנפרד.			
במקרה של שגיאה השגיאה תפורט.

לפניות בנוגע לפורום: shmuel@yemot.co.il

 2 
שמואלשמואל 24 בנוב׳ 2021, 11:56
קבלת מידע בזמן אמת על שלוחת תור
הפקודה היא - GetQueueRealTime

הפרמטרים הנדרשים

פרמטר	תיאור	סוג
token	טוקן	string
queuePath	נתיב שלוחת התור במערכת. לשלוחה ראשית: . או לשלוחות פניומיות: /1/2	string
מענה בעת הצלחה:

מאפיין	סוג	הסבר	דוגמא
responseStatus	string	סטטוס הפעולה	OK
queueData	Object	מידע כללי על התור	דוגמא בטבלא למטה
members	array	מידע על הנציגים	דוגמא בטבלא למטה
entries	array	מידע על הממתינים	דוגמא בטבלא למטה
שימו לב! כל הסטטיסטיקות של הנציגים בזמן אמת מתאפסת בעת שינוי קובץ queue.ini שבשלוחה.
פירוט של "queueData":

ערך	סוג	הסבר
Abandoned	int	שיחות שננטשו
Calls	int	לקוחות ממתינים
Completed	int	שיחות שהושלמו
TalkTime	int	זמן שיחות
Holdtime	int	זמן המתנה
Max	int	מקסימום שיחות בתור
Strategy	string	סוג התור
פירוט של כל אובייקט במערך "members":

ערך	סוג	הסבר
agent	string	מספר הנציג
Status	string	סטטוס נציג. 1 פנוי 2 תפוס
CallsTaken	int	שיחות שהנציג לקח
LastCallUnitTime	string	זמן השיחה האחרונה שהוא לקח ב unit time
LastCall	string	זמן של השיחה האחרונה שלקח
LastCallAgo	string	לפני כמה זמן לקח שיחה אחרונה, למשל: 4 דקות, 33 שניות
Paused	Boolean	האם הנציג בהפסקה
Penalty	string	עדיפות הנציג בתור
פירוט של כל אובייקט במערך "entries":

ערך	סוג	הסבר
phone	string	מספר הלקוח
Wait	string	זמן המתנה בשניות
WaitAgo	string	כמה זמן הלקוח ממתין, למשל: 7 דקות, 23 שניות
Position	string	מיקום בתור
במקרה של שגיאה השגיאה תפורט.

לפניות בנוגע לפורום: shmuel@yemot.co.il

 5 
אחרי 26 ימים
שמואלשמואל  לפני 12 חודשים
קבלת מידע על המערכת

הפקודה היא - GetCustomerData

הפרמטרים הנדרשים:

פרמטר	תיאור / הערות
token	טוקן
מאפייני תגובת השרת:

מאפיין	סוג	ערך
mainDid	string	מספר המערכת הראשי
secondary_dids	array	מערך של מספרים משניים (ראה להלן)
callerIds	array	מערך של מספרי ספיישל לשיחות יוצאות (ראה להלן)
name	string	שם לקוח
expiredUnits	boolean	האם יחידות פגו תוקף
unitsExpireDate	string	תאריך תפוגה של היחידות
email	string	כתובת אימייל
organization	string	שם ארגון
contactName	string	שם איש קשר
phones	string	טלפון
invoiceName	string	חשבונית על שם
invoiceAddress	string	כתובת למשלוח חשבונית
fax	string	פקס
accessPassword	string	סיסמת גישה למערכת
units	string	כמות היחידות שבמערכת
recordPassword	string	סיסמת הקלטות
resellerCreditFile	string	שם משווק
systemSite	string	אתר מערכת (לדוגמה: yemot ymt ymta ymtb)
בתוך מערך secondary_dids (מספרים משניים) יופיעו 2 אובייקטים

אובייקט	תיאור	דוגמה
id	מזהה מספר משנה	100
did	מספר משנה	0773137770
usage	שימוש	goto:/1
בתוך מערך callerIds (מספרי ספיישל) יופיעו אובייקט 1

אובייקט	תיאור	דוגמה
callerId	מספר מאושר לזיהוי יוצא	0773137770
לפניות בנוגע לפורום: shmuel@yemot.co.il

 11 

