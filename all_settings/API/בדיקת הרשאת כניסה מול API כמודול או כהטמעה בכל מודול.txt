ב"ה

מודול בדיקת הרשאת כניסה מול API
להטמעה בכל מודול

הסבר על המודול: המודול בודק האם הלקוח שנכנס למערכת מורשה כניסה למערכת.
במידה שלא השיחה בכלל לא מקבלת מענה והלקוח יקבל תגובה כמו שהוא חסום ברשימת התפוצה או לא מורשה כניסה למערכת.

באם רוצים שזה יעבוד בצורה שהמערכת בכלל לא תענה לשיחה ותשמיע דחייה המודול צריך להיות בשלוחה הראשית.

סוג השלוחה:

type=call_api_verification
חובה לספק כתובת לבדיקה:

call_api_link=http://....
שימו לב. במקרה שהשרת שלכם לא מגיב - או מגיב תשובה לא תקינה - השיחה תתנתק, כנ"ל במידה שערכי החובה לא הוגדרו.

סוג הפניה, בחירת מחדל GET אפשר להגדיר POST:

call_api_type=POST
ערכים שאתם מקבלים:
ApiDID מספר המערכת שחוייג
ApiPhone טלפון שהתקשר
ApiExtension שלוחה

תשובות.

ניתן לענות כל תשובה, ולהגדיר לאן ללכת במידה שהיא נענתה. למשל, אם אתה רוצים לעשות OK למי שמורשה, יש לציין:

call_api_answer_OK=/1
ואז ילך לשלוחה 1 מהשלוחה הראשית. ראה כאן את האפשרויות להגדרה כולל ניתוק.

או אם אתם עונים ERROR לציין:

call_api_answer_ERROR=/7
ואז ילך לשלוחה 7 מהשלוחה הראשית. ראה כאן את האפשרויות להגדרה כולל ניתוק.

או, תוכלו לענות בעצמכם כל פעם לאן ללכת. התשובה שלכם צריכה להיות למשל:

GOTO=XX
שבמקום ה"XX" לאן ללכת. במקרה כזה אין צורך להגדיר כלום בשלוחה ואתם כל שיחה קובעים לאן ללכת.

קישורים לתוספים שניתנים להגדרה בכל מודול
רשימת כל ההגדרות שניתנות להטמעה בכל מודול
הגדרות זיהוי בכניסה לשלוחה
הסבר על הודעת ברוכים הבאים (הודעה ראשונה בשלוחה)
הרשאות כניסה לשלוחה
לפניות בנוגע לפורום: shmuel@yemot.co.il

 15 
לפני 7 חודשים
שמואלשמואל  18 בנוב׳ 2020, 16:39
בדיקת הרשאת כניסה מול שרת API כהטמעה בכל מודול
ניתן להגדיר בכל כניסה לשלוחה בדיקה מול שרת API חיצוני האם הלקוח מורשה לכניסה לשלוחה.

כל הערכים הנשלחים בשלוחת API נשלחים גם בפונקציה הזו.

מגדירים:

check_api=yes
api_link=כתובת לבדיקה
האם לבדוק כל כניסה לשלוחה, או רק בניסיון הראשון (ברירת מחדל בודק רק בניסיון הראשון)

check_api_every_entry=yes
המערכת מבצע פעולות לפי התשובה שאתם מחזירים.

להלן התשובות האפשריות:

OK = ממשיך מיד לשלוחה בצורה רגילה

NO = יוצא מהשלוחה עם הודעה M1102 אין לכם הרשאת גישה לתיקיה זו

Out = יוצא מהשלוחה ללא הודעה

בתשובות NO ו Out ניתן להגדיר לאיזה שלוחה לעבור (ברירת מחדל, חוזר שלוחה אחורה) | ראה כאן את כל אפשרויות ההגדרה כולל ניתוק.

api_goto=/1
כל תשובה אחרת או שלא מתקבלת תשובה כלל, יוצא מהשלוחה ללא הודעה.
ניתן להגדיר גם במקרה כזה, לאיזה שלוחה לעבור (ברירת מחדל, חוזר שלוחה אחורה) | ראה כאן את כל אפשרויות ההגדרה כולל ניתוק.

api_error_goto=/2

