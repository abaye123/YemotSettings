ניקוד על האזנה אפשרי במודל השמעת קבצים - playfile.

דו"ח הנקודות שנשמרו למאזינים ישמר בתיקיית Points הנמצאת תחת לתיקיה הראשית
בפנים יש את הקבצים
points_log - כל הפעולות של הנקודות
points_total - סך הנקודות הקיים לכל לקוח (מחולק לפי סוגי כניסה לניקוד)
points_not_multiple - רשימת הפעולות עליהם הלקוח לא יקבל כפל נקודות, בדרך כלל מוגבל עם זמן מקסמילי בו לא ניתן לצבור שוב את הנקודות.

על מנת שיצבר ניקוד על כל האזנה ישל להוסיף את הערך

points_add=yes
ערך זה מגדיר שיצברו נקודות על כל האזנה - הוספת הניקוד מתבצעת רק כאשר המאזין מסיים להאזין לקובץ.
בברירת המחדל המערכת מוסיפה נקודה אחת על כל קובץ שמסיימים להאזין לו בהצלחה, במידה ורוצים שיוספו כמות נקודות אחרת מנקודה להאזנה, ניתן להגדיר זאת בערך:

points_add_amount=2
בדוגמה המאזין יצבור 2 נקודות על כל האזנה, אך כמובן ניתן להגדיר כל כמות ניקוד מבוקשת.

הנקודות ישמרו בברירת מחדל לפי מספר הטלפון של המאזין.
אם רוצים לשנות ניתן להגדיר

enter_id_type=phone/digits/list/teudat_zehut
אחד מהסוגים של הכניסה כמו ת.ז. או סוג אחר כמופיע לעיל

באם רוצים שההתחברות לזיהוי האישי תהיה לפני הכניסה למודול ניתן להגדיר enter_id=yes, ואז ברירת מחדל תהיה כניסה לפי teudat_zehut , ולכן באם רוצים כניסה לפי טלפון חובה להגדיר enter_id_type=phone

באם לא הוגדר enter_id=yes, אז הכניסה תתבצע לפני העדכון הנקודות בפעם הראשונה, כלומר לאחר האזנה הראשונה, וכאמור ברירת מחדל תהיה עדכון לפי מספר טלפון.

בהוספת נקודות
כל פעם מוסיף נקודות ב 3 רמות

סך הנקודות הכללי בכל המערכת

סך הנקודות הכללי בתיקיה הנוכחית כלומר הוספת נקודות כללית על כל מה שצבר בתיקיה. (ניתן לשנות את הערך לשמירה בערך PointsVal)

סך הנקודות עבור הפעולה הספציפית, בהשמעת קבצים זה תיקיה+מספר הקובץ להשמעה.
בשאלות טריוויה זה הערך של התיקיה + השאלה הספציפית. (שומר את ערך PointsLog ברירת מחדל מדובר על המופיע בערך Log)

ניתן לעשות הגבלה על כמות צבירת הנקודות בכל 3 הרמות.
ברירת מחדל של הנקודות היא ללא - כלומר תמיד יהיה ניתן לצבור שוב נקודות על אותם ערכים.

הערכים להגבלה הם
multiple_points_not_until_points_total - הגבלה ברמה כללית, כלומר לא משנה היכן במערכת קיבל נקודות לא יוכל לצבור עוד נקודות עד שיפוג התוקף.

multiple_points_not_until_points_val - הגבלה ברמה של הערך הכללי - ברירת מחדל תיקיה,
כלומר ברגע שצבר בתייקיה הזאת או בערך הזה כבר נקודות, לא יוכל לצבור עוד נקודות עד שיפוג התוקף.

multiple_points_not_until_points_log - הגבלה ברמה של הערך הפרטי, ברירת מחדל בטיוויה זה השאלה ובהשמעת קבצים זה ההשמעה הספציפית. כלומר על אותה שאלה ממש לא יוכל לצבור עוד נקודות עד שיפוג התוקף.

דוגמא:
האפשרויות לתשובה הם כל אחד מאפשרויות הגבלבת הזמנים לדוגמא
multiple_points_not_until_points_total=10m
בדוגמא רואים שלאחר שלקוח צבר נקודות בכל מקום שהוא במערכת לא יוכל לצבור כלל נקודות למשך 10 דקות.

להלן הרשימה של כל הגבלת הזמנים:

1s = שניות
1m = דקות
1h = שעות
1d = יום אחד
1M = חודש אחד
2012-12-31 = עד סוף יום ותאריך
2013-12-31 23:59:59 = עד התאריך בשעה
15:59:59 = היום עד השעה
thisweek = עד סוף השבוע
thishebmonth = עד סוף החודש העברי הנוכחי
23:59:59 כלומר עד סוף היום הנוכחי
next-tzeis כלומר בצאת הכוכבים הבא (לדוגמא באם רוצים להשמיע פעם אחת ללקוח את ספירת העומר, ויתכן שזה יהיה בסמיכות זמן וצריך להשמיע שוב)
none = ללא פג תוקף, כלומר הערך יישאר לתמיד

השמעת כמות הנקודות
ברירת מחדל משמיע כל פעם את התוספת העכשווית .
לביטול ניתן להגדיר

points_add_say=no
ההודעות הם
M1017 קיבלת
M1014 נקודות

שאר ההשמעות ברירת מחדל לא משמיע אלא אם כן מוגדר כן להשמיע.
להשמעת כלל הנקודות שנצברו על ההשמעה או השאלה הספציפית יש להגדיר

points_log_say=yes
ההודעות הם
במידה ועדיין בתוקף אי צבירת נקודות נוספות ישמיע:
M1098 כבר קיבלתם ניקוד על ערך זה
במידה והוסיף נקודות ישמיע:
M1304 על ערך זה צברת
M1014 נקודות

להשמעת כלל הנקודות שנצברו בתיקיה הנוכחית יש להגדיר

points_val_say=yes
ההודעות הם
במידה ועדיין בתוקף אי צבירת נקודות נוספות ישמיע:
M1303 אי צבירת נקודות נוספות בתיקיה זו עדיין בתוקף
במידה והוסיף נקודות ישמיע:
M1301 בשלוחה זו צברת
M1014 נקודות

להשמעת כלל הנקודות שנצברו בכלל המערכת יש להגדיר

points_total_say=yes
ההודעות הם
במידה ועדיין בתוקף אי צבירת נקודות נוספות ישמיע:
M1302 אי צבירת נקודות נוספות עדיין בתוקף
במידה והוסיף נקודות ישמיע:
M1013 עד היום צברת
M1014 נקודות

דוגמא ללוג בקובץ
points_log.ini

כל "." זה אומר ערך חדש
דוגמא למופיע בלוג

Folder-2.Type-phone.id-0501234567.Phone-541234567.Date-2015-05-15.11:30:08.HebrewDate-5775-08-26.Log-play/2/015.Points-1.PointsVal-Folder-2-1.PointsLog-play/2/015-1.PointsTotal-1
ועכשיו מחולק ומוסבר
Folder-2 תיקיה מספר
Type-phone סוג כניסה לזיהוי לפי טלפון
id-0501234567 מספר הזיהוי
Phone-0541234567 טלפון המקשר
Date-2015-05-15.11:30:08 תאריך לועזי ושעה
HebrewDate-5775-08-26 תאריך עברי
Log-play/2/015 הלוג עליו נשמרה הפעולה - ברירת מחדל זה סוג תיקיה והשמעה
כאן כתוב השמעת קובץ בתיקיה 2 קובץ מספר 015
Points-1 כמות נקודות שקיבל עכשיו
באם עכשיו לא קיבל נקודות עקב ההגבלה יכתב multiple_points_not-Total/Val/Log
PointsVal-Folder/2-10 ערך כללי לשמירה - ברירת מחדל תיקיה
כאן כתוב שהערך הכללי הוא תיקיה 2 סך הכללי של הנקודות שניצברו בערך זה - 10
PointsLog-play/2/015-1 ערך וכמות הנקודות שצברו ספציפית על השאלה / השמעה נוכחית
כאן רואים שצבר על ההשמעה 015 בתיקיה 2 סך הכל נקודה אחת
PointsTotal-15 סך הניקוד הכללי אותו צברו עד עכשיו בכלל התיקיות.

**## מניעת איפוס הניקוד במערכות גדולות.
**

ניתן להגדיר את ההגדרה

points_total_split=yes
מומלץ להגדיר בקובץ ivr.ini הראשי.

הסבר

ישנם מערכות עם הרבה משתמשים אשר משתמשים במגוון דברים לצבירת ניקוד, מה שגורם שהקבצים של points_total וכן points_not_multiple, נהיים עמוסים מאוד, עד שמגיעים לגבול ההגבלה המוגדרת המערכות של 10 מגה בייט, ואז המערכת מאפסת בצורה אוטומטי ומתחיל קובץ חדש (על הקובץ הישן נוסף הסימון + ונשאר בתיקייה עד לאיפוס הבא...), כמובן שזה גורם שמי שצבר ניקוד מתחיל מההתחלה, וכן בקובץ points_not_multiple, שבו רשומים בעצם כל ההגבלות של למי לא לתת נקודות עד ל... וכו', וכאשר הוא מתאפס, כמובן שכל ההגבלות אינם).

כאשר מגדירים את ההגדרה הבאה, המערכת לא מאחסנת את הנתונים בוקובץ אחד כללי, אלא מחלקת אותם, בתיקיית Points ייווצר תיקייה בשם Split ובתוכו יהיו קבצים נפרדים לכל ערך, כלומר שבקובץ points_total יהיה רק סיכום כולל של כל המערכת ותו לא, וכן בקובץ points_not_multiple יהיה רק את ההגבלות ברמה כללית לכל המערכת.
כל שאר הסיכומים (לפי ערך, ולפי תיקייה וכו'), וכן כל שאר ההגבלות, יהיה בקבצים נפרדים, כלומר שיהיה קובץ יכום לכל תיקייה בנפרד, וכן לכל ערך בנפרד.

