ב"ה

מערכת מכירת כסאות לבתי כנסת , אירועים וכד'
type=sale_seats
מכיוון שהושקעו במודול זה טרחה רבה, ועדיין לא כוסו הוצאות ההקמה, ומכיוון שאנו סומכים על משתמשי הפורום שיתנהגו בהגינות וביושר לכן העלינו לכאן את כל הפרטים וכל לקוח המעוניין להשתמש במודול זה ישלם 500 ש"ח+מע"מ למערכת חד פעמי ובנוסף 100 ש"ח+מע"מ למכירה נוספת באותה מערכת.
מי שמעוניין להתשמש במודל ללא תשלום - עליו להגיש בקשה בכתב לימות המשיח, עם הסבר מדוע מתבקש השימוש ללא תשלום - והנהלת ימות המשיח תשקול את הנושא.

חשוב להדגיש - אין שום בעיה לבדוק את המודול ואת ההגדרות לצורך התנסות ובדיקה ללא תשלום, התשלום הוא רק כאשר הפונקציה יוצאת לשימוש המאזינים

באחריות המשתמשים לפנות לשרות הלקוחות ולשלם.

קישורים לתוספים שניתנים להגדרה בכל מודול
רשימת כל ההגדרות שניתנות להטמעה בכל מודול
הגדרות זיהוי בכניסה לשלוחה
במודול זה הכניסה היא ברירת מחדל לפי טלפון
הסבר על הודעת ברוכים הבאים (הודעה ראשונה בשלוחה)
הרשאות כניסה לשלוחה
המכירה היא בעצם אחד לכל מערכת
כאשר ניתן לגשת למכירה משלוחות שונות לצורך שפות שונות לדוגמא אבל המקומות בכל המערכת הם אותם מקומות שנמכרים

התיקיה של המכירה היא תיקיית SaleSeats שתחת התיקיה הראשית

בתיקיה זו יש להכניס קובץ בשם:

sale_seats.ini
ובו כל הכסאות למכירה
המכירה כוללת בחירת שורה (אפשר להשתמש בזה לצורך הענין לבחירת אזור)
ולאחר מכן בחירת מושב
בנוסף יש הגדרה כמה המחיר לכל כסא וכן האם מי שבוחר כסא אקראי האם לתת את המושב הזה
(יש כסאות שמי שבוחר דווקא אותם תתן לו אבל מי שלא אכפת לו איפה לא תתן לו אותם, ולכן הערך מגדיר האם לאפשר את הכסא בצורה רנדומלית.

הסדר בקובץ הוא:
מספר שורה-מספר כיסא-מחיר-האם לתת באקראי או לא = תפוס/פנוי/בהזמנה

01-12-800-random=available
הסבר:
שורה 01
כסא 12
מחיר 800
לתת למי שרוצה את הכסא בצורה אקראית random
בשביל לא לאפשר את הכסא בבחירה אקראית יש לכתוב במקום random את המילה select
= תוצאה הכסא פנוי available

כאשר כסא באמצע הזמנה
התוצאה במקום available תהיה
middle_sale
בתוספת צורת ההתחברות
לדוגמא

middle_sale-id-phone-0501234567
הפרוש שמשתמש 0501234567
עכשיו באמצע הזמנה של הכסא והכסא תפוס עד שהמשתמש יבטל או ינתק - שאז הכסא מיידית יחזור למצב של available או שיקנה את הכסא ואז הכסא יעבור למצב קבוע של
Sold
בתוספת צורת ההתחברות
לדוגמא

Sold-id-teudat_zehut-123456789
הכסא נקנה על ידי משתמש תעודת זהות שמספרו 123456789

בנוסף על כל תפיסת כסא / ביטול / קניה
הפעולה נרשמת בתיקית SaleSeats בקובץ sale_seats_log.ymgr
ביחד עם שם הלקוח בנוסף לכל הפרטים

המערכת מאוד חכמה והושקע מחשבה רבה כך שגם אם 2 אנשים ביחד על הטלפון - רק מי שלחץ רגע קודם הוא יקבל את המקום ולשני המערכת תודיע שזה כבר תפוס
וברגע שלקוח מבטל באותו רגע הכסא חוזר להקצאה לכולם

הגבלת קנית כסאות

ברירת מחדל שכל אחד יכול לקנות כמה כסאות שהוא רוצה
אם רוצים ניתן לעשות הגבלה

sale_seats_max_sold=yes
במצב כזה כל אחד יוכל לקנות 2 מקומות
אם רוצים לשנות את ערך ברירת המחדל לכולם ניתן להגדיר

sale_seats_max_sold_amount=8
ואז כולם יכולים להזמין 8 מקומות
באם יש אנשים פרטים שבשבילהם רוצים לתת יותר או פחות כסאות להזמנה ניתן להכניס אותם ברשימה בתיקית SaleSeats בקובץ
sale_seats_max_sold.ini
בתוך הקובץ יש להכניס מספר זיהוי = כמות מקומות
לדוגמא

0771234567=10
כאן רואים שזיהוי הנ"ל יכול להזמין 10 מקומות

מספר הספרות בבחירת שורה וכסא

ברירת מחדל שורה 2 ספרות
וכסא 2 שורות
ואז יש להכניס בקובץ

01-08-800-random=available
כלומר שורה 1 כסא 8 אבל להכניס לקובץ עם 2 ספרות ולכן כתוב 01-08
ללקוחות בטלפון ניתן לומר להקיש אחת וסולמית במקום להקיש אפס אחת - והמערכת לבד תוסיף את ה0

אם מגדירים ספרה אחת לדוגמא בשורה ו4 ספרות בכסא אז זה יראה ככה

1-4567-800-random=available
הגדרות בשלוחה
ברירת מחדל ההודעות על תשלום הם בשקלים
במידה והגדרתם במנוע הסליקה חיוב בדולרים credit_card_currency=2
אז גם ההודעה במודול זה במקום שקלים (M1521) תהיה דולרים (M1829)

השינוי עבור כמות הספרות בשורה

sale_seats_digits_line=5
בדוגמא השורה היא של 5 ספרות

השינוי עבור כמות הספרות בכסא

sale_seats_digits_seat=3
בדוגמא הכסא הוא של 3 ספרות

לאחר בחירת שורה המערכת משמיע בצורה אוטומטית את כל הכסאות הפנויים בשורה
ניתן גם לבחור שיתן כסא אקראי מאותה השורה

לאחר בחירת מקום
אם עדין לא הגיע למקסימום כסאות שהוא יכול להזמין
המערכת תציע לו כסא נוסף סמוך, או כסא מהשורה או בחירת כסא נוסף משורה אחרת
וכמובן אפשרות לסיום הזמנה

בסיום הזמנה המערכת תשמיע את כל המקומות שהלקוח בחר - המחיר של כל אחד והמחיר הכולל
הלקוח יכול לאשר או לבטל את ההזמנה

לאחר אישור ההזמנה ניתן להגדיר שיועבר להקלטה של השם והכתובת של מי שעבורו נרכש הכסאות, ורק לאחר מכן יועבר לתשלום
אם לא מוגדר מועבר ישר לאפשרויות התשלום
בשביל להגדיר הקלטה יש לעדכן

sale_seats_payment_record=yes
ההודעות הקשורות הם
M1549 אנא הקליטו את השם שעבורו אתם רוכשים את המקומות וכן את הכתובת למשלוח דואר שלו, בסיום ההקלטה הקישו סולמית
M1553 "
לאישור ההקלטה הקישו 1
לשמיעה הקישו 2
להקלטה מחדש 3"
M1554 הפרטים נקלטו בהצלחה
M1305 ההודעה קצרה מידי

ניתן להגדיר שמיד בסיום הקלטה יועבר להמשך ללא השמעת ההודעה - כלומר ללא צורך לאשר אלר מיד ישמע "הפרטים הוקלטו בהצלחה" ויועבר לאמצעי תשלום

sale_seats_record_ok=#
לגבי התשלום בפועל כרגע יש 3 אפשרויות - 3 שלוחות- ואם יש צורך נפתח ונתאים את צורות התשלום לכל המעוניין
כרגע שלוחה 1 מחוברת לנדרים פלוס וכן לקארדקום, במידת הצורך נחבר את סליקה גם דרך פלאקארד ועוד.

ברירת מחדל שלוחה אחת מחוברת לנדרים פלוס הערכים להגדרה עבור נדרים פלוס הם:

nedarim_plus_terminal_number=1122334
במידה והסליקה בוצעה עם סטטוס של OK
אז בנוסף לדוח של נדרים פלוס ממנו ישירות ובנוסף לדוחות והאיימיל שלנו על הסליקה דרך נדרים פלוס
תוכלו לראות בקובץ לוג של sale_seats_log.ymgr
ערך
PaymentType
עם תוצאה של
NedarimPlus

לסליקה דרך "קארדקום"
יש צורך להגדיר

sale_seats_payment_credit_type=cardcom
וכן להגדיר את מספר המסוף ושם משתמש וסיסמה
;שם משתמש - חובה

cardcom_user_name=meserchabad
מספר מסוף - חובה

cardcom_terminal_number=112233
;מספר חנות - ברירת מחדל 555

cardcom_register_number=123
במידה והסליקה בוצעה עם סטטוס של OK
אז בנוסף לדוח של קארדקום ישירות מהם, ובנוסף לדוחות והאיימיל שלנו על הסליקה דרך קארדקום
תוכלו לראות בקובץ לוג של sale_seats_log.ymgr
ערך
PaymentType
עם תוצאה של
Cardcom

שלוחה 2 מודיע "דרך הוראת הקבע הקבועה"
צריך להכניס את הזיהוי של המשתמש לתוך קובץ
sale_seats_postpay.ini
ובו כל מספרי הזיהוי המאושרים לתשלום בהוראת קבע
לעשות את זיהוי ואז שורה חדשה ועוד זיהוי ועוד שורה חדשה כו'
לדוגמא אם הזיהוי האישי הוא תעודת זהות אז יש להכניס את כל התעודת זהות שלהם מאושר להרשם דרך ההוראת קבע
אחרת המערכת תודיע
M1539 אין הרשאה לחיוב בהוראת קבע

כאשר המספר הזיהוי מאושר לתשלום בהוראת קבע - מיד שומר לתמיד את המקום בקובץ sale_seats.ini עם ערך של Sold
ובנוסף מציין לכם בלוג
PaymentType
עם תוצאה של
Postpay

שלוחה 3
מבקש להקיש קופון
הלקוח יכול להקיש כל קופון ובכל אורך שרוצה
לאחר שהלקוח אישר
המערכת בודקת בקובץ
sale_seats_coupon.ini
האם הקופון מופיע בקופונים המאושרים
יש להכניס את הקופון ואז שורה חדשה ועוד טלפון ועוד שורה חדשה כו'

אם הקופון לא מופיע המערכת תודיע
M1538 הקופון שהוקש שגוי
שימו לב שמערכת הקופונים לא מוחקת את הקופון וכל אחד יכול להשתמש כמה פעמים שרותים עם אותו הקופון
במידת הצורך יוכלו להרחיב מודול זה בהמשך שיהיה אפשרות של שילוב קופון עם מחיר ושימוש חד פעמי בקופון , והמערכת תדע לקחת חלק בקופון ואת היתרה באשראי או בהוראת קבע וכד'

באם הקופון מאושר
המערכת שומרת לתמיד את המקום בקובץ sale_seats.ini עם ערך של Sold
ובנוסף מציין לכם בלוג
PaymentType
עם תוצאה של
Coupon-6282255
כלומר קופון מספר 6282255

לאחר שהלקוח שילם באחד מהצורות המאושרות
הלקוח מקבל מספר אישור
ברירת מחדל מספר אישור מתחיל מ1001 ומעלה
במידת הצורך ניתן לשנות את מספר האישור ההתחלתי בערך
[codesale_seats_approval_number_start=770[/code]
כאן רואים שיתחיל את האישורים מהמספר הבא שלאחר 770 - כלומר המזמין הראשון יקבל 771

בכל סיום הזמנה מאושרת
נשלח במייל קובץ עם כל הפעולות וההזמנות המאושרות, ובמידה ויש הקלטה של השם והכתובת שהוגדר בערך sale_seats_payment_record=yes אז גם תצורף ההקלטה

אם רוצים לבטל את השליחה למייל ניתן להגדיר

email_send=no
האיימיל נשלח לפי השם והאימייל הוגדר בחייגן
במידת הצורך ניתן לשנות בערכים

email_address=a@jj.vv.vv
email_name=aba
ניתן להגדיר שישלח את המייל למייל נוסף

email_address2=mail@mail.com
החלפת שמות העברית בקבצים

קובץ

sale_seats_log.ini
ערכים:

sale_seats_log=דו"ח כללי במכירת כיסאות
Folder=שלוחה
IdType=סוג זיהוי
teudat_zehut=תעודת זהות
digits=הקשת ספרות
list=רשימה
phone=טלפון
enter_phone_list=רשימת טלפונים
EnterId=מספר זיהוי
ValName=שם
Phone=טלפון
Date=תאריך
Time=שעה
HebrewDate=תאריך עברי
Line=שורה
Seat=כסא
Price=מחיר הכסא
Log=פעולה
middle_sale=כסא במהלך הזמנה
CancelOk=הזמנה מבוטלת
SoldOk=כסא קנוי
FullValue=ערך מלא של המקום
AmountSeat=סה"כ כסאות
TotalPayment=סה"כ לתשלום
PaymentType=סוג תשלום
Postpay=נציג
NedarimPlus=נדרים פלוס
Coupon=קופון
ApprovalNumber=מספר הזמנה
 
קובץ

sale_seats_ok.ini
הערכים

sale_seats_ok=כסאות שנמכרו בהצלחה
Folder=שלוחה
IdType=סוג זיהוי
teudat_zehut=תעודת זהות
digits=הקשת ספרות
list=רשימה
phone=טלפון
enter_phone_list=רשימת טלפונים
EnterId=מספר זיהוי
ValName=שם
Phone=טלפון
Date=תאריך
Time=שעה
HebrewDate=תאריך עברי
Line=שורה
Seat=כסא
Price=מחיר הכסא
Log=פעולה
middle_sale=כסא בהזמנה
SoldOk=כסא קנוי
FullValue=ערך מלא של המקום
AmountSeat=סה"כ כסאות
TotalPayment=סה"כ לתשלום
PaymentType=סוג תשלום
Postpay=נציג
NedarimPlus=נדרים פלוס
Coupon=קופון
ApprovalNumber=מספר הזמנה
התחברות לאחר הזמנה
כאשר הלקוח מתקשר פעם שניה לאחר ההזמנה המערכת תציע לו לשמוע את הכסאות שכבר הזמין או הזמנת כסאות נוספים

הגדרות כלליות למודול

timeout=7
בשביל זמן המתנה לאחר הקשה עד שבודק מה הקישו

**
קובץ מיוחד לכל אישור**
הוספנו קובץ מיוחד לכל אישור
כל הקבצי ymgr וקבצי html שנוצרים לכל אישור, נשמרים בתיקיה בשם ApprovalOk שמתחת לתיקית SaleSeats שתחת התיקיה הראשית

שימו לב שבשביל שהמערכת תמיר לכם למילים שאתם רוצים שיופיעו בדוח

יש לשמור את הנתונים בקובץ בשם

SaleSeatsApprovalOk.ini
את הקובץ יש לשים בתוך תיקיית האישורים המיוחדת - בתוך תיקית ApprovalOk
במידת הצורך (אם עדיין לא הזמנתם שוב דבר מהמערכת ועדיין אין תיקיה) אז תצרו את התיקיה, או עשו הזמנה אחת והמערכת תפתח לבד את התיקיה.

ברירת מחדל לקובץ

SaleSeatsApprovalOk.ini
SaleSeatsApprovalOk=כסאות שנמכרו בהצלחה בהזמנה זו 
Folder=שלוחה
IdType=סוג זיהוי
teudat_zehut=תעודת זהות
digits=הקשת ספרות
list=רשימה
phone=טלפון
enter_phone_list=רשימת טלפונים
EnterId=מספר זיהוי
ValName=שם
Phone=טלפון
Date=תאריך
Time=שעה
HebrewDate=תאריך עברי
Line=שורה
Seat=כסא
Price=מחיר הכסא
Log=פעולה
middle_sale=כסא בהזמנה
SoldOk=כסא קנוי
FullValue=ערך מלא של המקום
AmountSeat=סה"כ כסאות
TotalPayment=סה"כ לתשלום
PaymentType=סוג תשלום
Postpay=נציג
NedarimPlus=נדרים פלוס
Coupon=קופון
ApprovalNumber=מספר הזמנה
DealSuccessfully=אישור אשראי
הודעות קשורות
M1498 "אנא הקישו את מספר השורה המבוקש
ליציאה הקישו סולמית."
M1499 אין כסאות לבחירה בשורה זו
M1500 בשורה...
M1501 יש
M1502 כסאות זמינים
M1503 אנא הקישו את מספר הכסא המבוקש, לבחירת כסא אקראי הקישו 0 וסולמית ליציאה הקישו סולמית.
M1504 הכסאות הזמינים הם:
M1505 כסא זה אינו זמין למכירה
M1506 בחרת שורה
M1507 כסא
M1508 הסכום לתשלום על הכסא הינו:
M1509 "לשמירת המקום הקישו 1
לבחירת כסא אחר הקישו 2"
M1510 הכסא נשמר עד לסיום השיחה
M1511 "(כסא...) עדין פנוי באם ברצונך לרכוש גם אותו הקש 1
לחזרה לתפריט הקישו 2"
M1512 שגיאה בשמירת הכסא
M1513 סיום הזמנה
M1514 הוזמנו (X כסאות)
M1515 (הוזמנו X) כסאות
M1516 הסך הכולל לתשלום
M1517 להלן הפירוט
M1518 שורה..
M1519 מחיר
M1520 הסך הכולל לתשלום
M1521 שקלים
M1522 "לאישור ההזמנה הקישו 1
לביטול ההזמנה הקישו 2"
M1523 "ההזמנה בוטלה
שלום ותודה"
M1524 "לתשלום בכרטיס אשראי הקישו 1
לתשלום בהוראת קבע הקובעה במוסד הקישו 2
להקשת קופון הקישו 3"
M1525 "המקומות נרכשו בהצלחה
"
M1526 הגעת למקסימום כרטיסים הניתן לשמור עבורך הינך מועבר לתשלום
M1527 "
כבר יש כסאות קנויים על שמך
לשמיעת הפרטים הקישו 1
להזמנה נוספת הקישו 2
ליציאה הקישו כוכבית"
M1528 "כבר קנית את מקסימום כסאות האפשרי עבורך, לא ניתן להזמין כסאות נוספים
"
M1529 נקנו... (כסאות)
M1530 "לסיום ומעבר לתשלום הקישו 1
לקניית כסא נוסף סמוך הקישו 2
לבחירת כסא נוסף בשורה זו הקישו 3
לבחירת מקום בשורה אחרת הקישו 4"
M1531 ...אינו זמין למכירה אנא נסו אפשרויות נוספות
M1532 אין כסא אקראי לבחירה בשורה זו אנא בחר כסא מהתפריט
M1533 העיסקה נקלטה בהצלחה
M1534 חובה לודא מול הנציג תוך 24 שעות שהוראת הקבע נקלטה ותקינה, אחרת הרישום יבוטל
M1535 חובה לודא מול הנציג תוך 24 שעות שהקופון נקלט ותקין אחרת הרישום יבוטל
M1536 אנא הקישו את קוד הקופון שברשותכם וסולמית לסיום
M1537 "לסיום ומעבר לתשלום הקישו 1 לבחירת מקום נוסף הקישו 2"
M1538 הקופון שהוקש שגוי
M1539 אין הרשאה לחיוב בהוראת קבע
M1587 עדיין אין כסאות בהזמנה זו
M1588 ";לבחירת כסא נוסף בשורה זו הקישו 1
;לבחירת כסא נוסף בשורה אחרת הקישו 2
;""לסיום ומעבר לתשלום הקישו 3"
M2537 כסא נוסף סמוך אינו זמין במצב זה


