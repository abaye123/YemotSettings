ב"ה
הפוסט הישן כאן

הסבר כללי על מודול כניסה לפי מפתח:
המערכת תבצע פעולה או מספר פעולות (לפי הגדרתכם) לכל מי שיקיש מספר מסויים
ותבצע פעולה אחרת או סדרת פעולות אחרות למי שיקיש מספר אחר

הפעולות האפשרויות להגדרה הם: 1. השמעת הודעה כללית 2. השמעת הודעה מיוחדת למפתח שהוקש | 3. שאלה | 4. תפריט | 5. הקלטה |6. מעבר לשלוחה אחרת

הפעולה היחידה שחובה להגדיר לכל סוג מפתח היא מעבר לשלוחה אחרת (אם לא תגדיר יחזור שלב למעלה)

ניתן להגביל כמות פעמים של שימוש במפתח
ניתן להגדיר כמה סוגי מפתחות

הגדרת סוג השלוחה

type=key_play_set_record_go_to_foldar_b
קישורים לתוספים שניתנים להגדרה בכל מודול
רשימת כל ההגדרות שניתנות להטמעה בכל מודול
הגדרות זיהוי בכניסה לשלוחה
הסבר על הודעת ברוכים הבאים (הודעה ראשונה בשלוחה)
הרשאות כניסה לשלוחה
 0 
ששמחה - זו הסיסמא  לפני 10 חודשים
הגדרת המפתחות המאושרים
יש מספר מפתח - שאותו המאזין מקיש במערכת להלן: קוד מפתח
יש מספר מפתח - סוג המפתח, שלכל סוג יש את ההגדרות שלו, [הודעה, תוקף, כמות כניסות, שאלות וכו] להלן: סוג מפתח
לדוגמא:
1234=008
בדוגמא 1234 הוא קוד מפתח ו 008 הוא סוג המפתח
המשתמש מקיש את קוד המפתח, את כל ההגדרות שמגדירים בשלוחה מגדירי על סוג המפתח
ניתן להכניס כמה קודים מכל סוג מפתח כך שכאשר יקישו את כל אחד מהקודים המערכת תעבוד לפי אותו "סוג מפתח"

את רשימת המפתחות המאושרים (קוד מפתח) וכן את ההגדרות בשלוחה יש להכניס בקובץ בתיקיה בשם
KeyOkType.ini הסבר על אופן יצירת הקובץ כאן

יש להגדיר בקובץ את קוד מפתח=סוג מפתח

לדוגמא

12345=008
21852=008
01245=002
כלומר מפתח 12345 הינו קוד מפתח מסוג 008 [ומי שיקיש 12345 המערכת תפעל לפי ההגדרות שנגדיר על סוג מפתח 008]
מפתח 21852 הינו קוד מפתח מסוג 008 [ומי שיקיש 12345 המערכת תפעל לפי ההגדרות שנגדיר על סוג מפתח 008]
מפתח 01245 הינו קוד מפתח מסוג 002 [ומי שיקיש 12345 המערכת תפעל לפי ההגדרות שנגדיר על סוג מפתח 002]

אם אין מפתח קיים המערכת תודיע שהמפתח שגוי ותחזור שלב למעלה M1441

הגבלת פג תוקף למפתחות
ניתן להגדיר פג תוקף לכל קוד מפתח, לפי סוג המפתח [בכל קוד מפתח להקשה מסוג 008 יוכלו להשתמש עד X זמן מהשימוש הראשון בקוד המפתח]

open_key_008_time=
כל הזמנים המותרים ללקוחות ישמרו באותה תיקיה בקובץ בשם

KeyOkOpenTime.ini
לכן לא לגעת בקובץ הזה, אחרת תפגעו בשימוש הלקוחות בהגבלת הזמנים

אפשרויות הזמנים כמו כל אפשרויות הזמנים המערכת
הגדרה/ תו	= ל:
thiscall	שיתן לעבור פעם אחת בכל שיחה (ברירת מחדל לערך מספר 7).
s	שניות
m	דקות (אות קטנה)
h	שעות
d	ימים
M	חודשים (אות גדולה)
2012-12-31	עד סוף תאריך..
2013-12-31 23:59:59	עד תאריך.. בשעה..
15:59:59	היום עד השעה..
thisweek	עד סוף השבוע
thishebmonth	עד סוף החודש העברי הנוכחי
23:59:59	עד סוף היום הנוכחי (חצות הלילה)
next-tzeis	כלומר בצאת הכוכבים הבא (לדוגמא, באם רוצים להשמיע פעם אחת למאזין את ספירת העומר, ויתכן שזה יהיה בסמיכות זמן וצריך להשמיע שוב).
none	ללא פג תוקף, כלומר הערך יישאר לתמיד.
הודעות קשורות להגבלת זמן
M1979 חלה שגיאה בבדיקת תוקף המפתח שלך, אנא פנה למנהל המערכת
M1980 אישור הכניסה של המפתח שלך פג תוקף, לפרטים אנא פנה למנהל המערכת

הגבלת כמות שימושים
ניתן להגביל שימושים לכל מפתח להקשה לפי סוג מפתח [בכל מפתח מסוג 008 יוכלו להשתמש X פעמים]

block_key_008_after=
בכניסה בהצלחה המערכת תעדכן את הכניסה במפתח בקובץ
KeyOkAmountEntr.ini

בקובץ זה יהיה רשום כמות השימושים במפתח
לדוגמא

12345=15
כלומר מפתח 12345 נכנס בהצלחה 15 פעמים עם המפתח

דוגמא

12345=003
open_key_003_time=1M
block_key_003_after=12
כל מי שיקיש 12345 יכנס עם סוג המפתח 003
ויוכל להיכנס עד 12 פעמים, ועד חודש אחד מהכניסה הראשונה שבוצעה עם המפתח 003

 0 
ששמחה - זו הסיסמא  לפני 10 חודשים
אימות המפתח
לאחר הקשת מספר כלשהו על ידי המאזין, המערכת תשמיע לו את מה שהקיש ותבקש אישור או תיקון למפתח.

אופן השמעת ההקשה
ברירת מחדל השמעת המפתח בצורה ספרות, (100=אחת, אפס, אפס) digits

ניתן להגדיר בקובץ ext שישמיע את המפתח בצורת מספר (100=מאה)

say_key=Number
ניתן להגדיר בקובץ ext שלא ישמיע את ההקשה כלל

say_key=No
בקשת אישור
ברירת מחדל מבקש אישור, אם רוצים שלא יבקש אישור ניתן להגדיר בקובץ ext

ask_ok=no
בהקשת מפתח שגוי חוזר שלב אחורה

 0 
ששמחה - זו הסיסמא  לפני 10 חודשים
בכניסה מוצלחת
ישנם 6 שלבים

השמעת הודעה כללית לכל המפתחות
השמעת הודעה פרטית לכל סוג מפתח
שאלת טריוויה קבועה או אקראית
בקשת הקשה מהלקוח שתישמר במערכת
בקשת הקלטה מהלקוח שתישמר במערכת עם כל הפרטים שהוקשו.
מעבר לשלוחה אחרת
1. השמעת הודעה כללית לכל המפתחות
במידה ויש קובץ בשם M1558 המערכת תפעיל אותו דבר ראשון, לאחר מכן המערכת תשמיע את ההודעה הייחודית לסוג המפתח איתו המאזין נכנס.

2. השמעת הודעה פרטית לכל סוג מפתח
יש להעלות קובץ לשלוחה ולקרוא לו כשם סוג המפתח בדוגמא 008

3. שאלת טריוויה קבועה או אקראית
ניתן להגדיר

key_008_trivia_random=yes
ניתן להגדיר את ההגדרה בלי סוג המפתח ואז זה יפעיל על כל המפתחות

key_trivia_random=yes
את השאלות יש לקרוא בשם T ואת מספר השאלה. לדוגמא בשביל שאלה 1 יש לקרוא לקובץ השאלה T1
בשביל שאלה 2 יש לקרוא לקובץ T2 וכן הלאה

ברירת מחדל שואל רק את שאלה T1
ניתן להגדיר שישמיע שאלה אחרת או בחירה רנדומאלית מכל השאלות. יש להגדיר את השאלה הראשונה ואת השאלה האחרונה [ביניהם המערכת תעשה את הבחירה האקראית]

לדוגמא: שאלה מינימום

key_008_trivia_random_min=3
שאלה מקסימום

key_008_trivia_random_max=9
ואז המערכת תדע לבחור רק את שאלות 3, 4, 5, 6, 7, 8, או 9.
אם לא מוגדר, מינימום ומקסימום ברירת מחדל זה T1

התשובה הנכונה לשאלות
חובה להגדיר תשובה נכונה במספרים לכל אחד מהשאלות אם לא הוגדר המערכת תודיע שיש שגיאה
ניתן להגדיר לכל סוג מפתח תשובה נכונה שונה או לכולם את אותה התשובה
להגדרת תשובה נכונה לסוג מפתח מסויים

key_008_trivia_random_ok_1=3
key_008_trivia_random_ok_2=9
התשובה הנכונה של קובץ T1 זה מקש 3. והתשובה הנכונה של קובץ T2 יהיה מקש 9.

אם לכל סוגי המפתחות התשובות הם אחידות ניתן להגדיר:

key_trivia_random=yes
וכן את ההגדרה הנ"ל בהשמטה של מספר המפתח לדוגמא:

key_trivia_random_ok_1=3
key_trivia_random_ok_2=9
התשובה הנכונה של קובץ T1 זה מקש 3. והתשובה הנכונה של קובץ T2 יהיה מקש 9.

במקרה שהקיש תשובה לא נכונה חוזר שלב אחד למעלה

 0 
ששמחה - זו הסיסמא  לפני 10 חודשים
4. תפריט בחירה
לאחמ"כ ניתן להגדיר שהמערכת תתן למשתמש להקיש את בחירתו ותשמור את הבחירה שלו. ההגדרה היא

key_008_tfr=yes
בדוגמא רואים שלסוג מפתח 008 לאחר השמעת הקובץ ולאחר שאלת הטריויה באם מוגדר, המערכת תעביר את הלקוח לתפריט שבו המאזין יתבקש להקיש את בחירתו.
אם רוצים להפעיל תפריט תמיד בכל מפתח יש לרשום:

key_tfr=yes
הודעת התפריט היא: M1443 אנא הקישו את השיוך שלכם, לדילוג הקישו סולמית או המתינו
בתפריט זה כל מקש חוקי
הקשת הלקוח נרשמת בקובץ לוג בתיקיה KeyOkLog.ini

 0 
אחרי חודשיים
ששמחה - זו הסיסמא  לפני 7 חודשים
5. הקלטת הודעה ושליחה במייל
לאחר התפריט ניתן להגדיר לבקש מהמשתמש להקליט הודעה

key_008_record=yes
שם הקובץ שיווצר יכלול את המפתח ואת ההקשות
דוגמא לשם של קובץ

Key-123456789.KeyIs-008.AmountEntr-1.tfr-5.Date-2016-05-15-13-21-22
כאן רואים שההקלטה הגיעה
מפתח 123456789
סוג מפתח 008
נכנס 1 פעמים
הקיש בתפריט 5
הזמן של ההודעה 2016-05-15-13-21-22

באם רוצים שיכניס את ההקלטות לשלוחה אחרת ניתן להגדיר:

folder_move=5/7
התיקיה אליה שולחים את הקבצים חייבת להיות קיימת אחרת שגיאה.

במודול זה גם אם מנתקים באמצע השיחה - הקובץ נכנס לתיקיה, ונשלח איימיל עד הניתוק.

אם רוצים שלא יהיה ניתן להקיש סולמית ליציאה מההקלטה ושמיעה של ההקלטה וכו'
אלא יקליט עד שהלקוח ינתק צריך להוסיף את הערך

stop_record_only_hangup=yes
במידה והגדרתם הקלטה המערכת תשלח את ההקלטה למייל בתוספת הקובץ עם כל הפעולות שנעשו
לביטול שליחת למייל יש להגדיר:

emeil_send=cancel
להלן הערכים לקובץ html שנשלח
ניתן לשנות את הקובץ על ידי יצירת קובץ ini בשלוחה ולשנות את הערכים (שאחרי ה= להלן)

KeyOkLog.ini
הערכים הם:

KeyOkLog=דו"ח כניסות למפתח
Folder=שלוחה
IdType=סוג זיהוי
teudat_zehut=תעודת זהות
digits=הקשת ספרות
list=רשימה
phone=טלפון
enter_phone_list=רשימת טלפונים
EnterId=מספר זיהוי
ValName=שם
Phone=טלפון
DID=מערכת
Date=תאריך
Time=שעה
HebrewDate=תאריך עברי
Key=מפתח
KeyIs=סוג
AmountEntr=כמות כניסות
TriviaRandom=שאלת תפריט
TriviaRandomStatus=ענה בהצלחה
error=תשובה שגויה
ok=כן
Tft=בחירה בתפריט
NoFile=אין קובץ שאלה
NoAnswer=לא הוגדר תשובה נכונה
 
ברירת מחדל המערכת תשלח למייל המוגדר במערכת
אם רוצים לשנות את האיימיל ניתן להגדיר

email_address=AAA@gmail.com
השם של מקבל המייל

email_name=אברהם
 0 
ששמחה - זו הסיסמא  לפני 7 חודשים
6. מעבר בסיום | הודעות מערכת
לאחר מכן המערכת תעביר את המשתמש לשלוחה לפי הגדרה מיוחדת לכל סוג מפתח

key_008_go_to_foldar=/1
לא ניתן להגדיר מעבר כללי לכל המפתחות (ניתן להשתמש בעצה שהובאה כאן)
רק לתשומת לבכם גם במידה והמאזין לא הקישמפתח נכון/ תשובה נכונה הוא יועבר לאותה שלוחה

הקלטות מערכת
M1001 המקש שהוקש שגוי אנא נסו שנית
M1026 שלום ותודה
M1060 אנא השאירו הודעתכם לאחר הִשַמע הצליל. לֶסיום נתקו את השיחה או הַקישו סולמית
M1061 לשמיעת ההודעה הקישו 1, לֶאישור הקישו 2, להקלטה מחודשת 3, לביטול וחזרה הקישו 4.
M1305 ההודעה קצרה מידי
M1306 ההודעה מבוטלת
M1440 אנא הקש את המפתח שלך וסולמית לסיום
M1441 המפתח שהוקש אינו קיים.
M1442 מפתח זה כבר סיים את מקסימום השימושים.
M1443 אנא הקישו את השיוך שלכם, לדילוג הקישו סולמית או המתינו
M1540 עניתם בהצלחה
M1541 תשובתכם שגויה אנא נסו בפעם הבאה
M1542 שגיאה בהפעלת השאלה
M1543 שגיאה בקבלת תשובה נכונה
M1558 הודעה לפני שמיעת הודעת סוג המפתח

 
